{"id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","title":"Fix remaining 9 test failures","description":"Three distinct issue groups:\n\n1. **swarm_decompose/plan_prompt** (3 failures) - Prompt content assertions failing. Tests expect certain content in generated prompts that isn't there.\n\n2. **Checkpoint/Recovery** (3 failures) - \"there is no unique or exclusion constraint matching the ON CONFLICT specification\" - The swarm_contexts table is missing a unique constraint needed for UPSERT operations.\n\n3. **FTS search** (1 failure) - Full-text search fallback test failing. Likely missing FTS5 virtual table or triggers in test setup.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-20T19:48:02.991Z","updated_at":"2025-12-20T20:02:34.360Z","closed_at":"2025-12-20T20:02:34.360Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjepneb7ybq","title":"Fix swarm_decompose and swarm_plan_prompt tests","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T19:48:02.995Z","updated_at":"2025-12-20T20:02:27.546Z","closed_at":"2025-12-20T20:02:27.546Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjepneba91m","title":"Fix checkpoint/recovery - add unique constraint to swarm_contexts","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T19:48:02.998Z","updated_at":"2025-12-20T20:02:29.114Z","closed_at":"2025-12-20T20:02:29.114Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjepnebcihu","title":"Fix FTS search fallback test","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T19:48:03.000Z","updated_at":"2025-12-20T20:02:30.940Z","closed_at":"2025-12-20T20:02:30.940Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjepneb3e6h","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9s8wtmt1","title":"Test cell from debug session","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:11:41.597Z","updated_at":"2025-12-21T05:13:10.413Z","closed_at":"2025-12-21T05:13:10.413Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","title":"Drizzle Migration + Plugin Integration Tests","description":"Convert all raw SQL to Drizzle ORM with proper migrations. Add happy-path integration tests for all 93 plugin tools. TDD approach: test first, then implement.\n\nBranch: feat/drizzle-migration-and-tests\n\n## Phase 1: Foundation (sequential)\n- Migration runner with schema validation\n\n## Phase 2: Drizzle Conversion (parallel after Phase 1)\n- Convert streams subsystem\n- Convert memory subsystem  \n- Convert hive subsystem\n\n## Phase 3: Cleanup (after Phase 2)\n- Remove duplicate schema definitions\n\n## Phase 4: Integration Tests (parallel, some depend on Phase 2)\n- hive_* tools (9)\n- agentmail_* tools (11)\n- semantic_memory_* tools (8)\n- swarm_* tools (24)\n- skills_* tools (9)\n- structured_* + mandate_* tools (10)\n- repo_* tools (5)","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-21T05:17:13.832Z","updated_at":"2025-12-21T05:17:13.832Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9xs46","title":"Remove duplicate schema definitions","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.845Z","updated_at":"2025-12-21T05:17:13.845Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9ovwf","title":"Migration runner with schema validation","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-21T05:17:13.836Z","updated_at":"2025-12-21T05:41:15.798Z","closed_at":"2025-12-21T05:41:15.798Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9rprs","title":"Convert streams subsystem to Drizzle queries","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.839Z","updated_at":"2025-12-21T05:48:38.790Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9uul8","title":"Convert memory subsystem to Drizzle queries","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.842Z","updated_at":"2025-12-21T05:45:11.033Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9vceg","title":"Convert hive subsystem to Drizzle queries","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.843Z","updated_at":"2025-12-21T05:45:11.629Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9zuyq","title":"Integration tests: hive_* tools (9 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.847Z","updated_at":"2025-12-21T05:41:40.541Z","closed_at":"2025-12-21T05:41:40.541Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda165l","title":"Integration tests: agentmail_* tools (11 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.849Z","updated_at":"2025-12-21T05:41:41.871Z","closed_at":"2025-12-21T05:41:41.871Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda2hg5","title":"Integration tests: semantic_memory_* tools (8 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.850Z","updated_at":"2025-12-21T05:41:43.066Z","closed_at":"2025-12-21T05:41:43.066Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda4z0b","title":"Integration tests: swarm_* tools (24 tools)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T05:17:13.852Z","updated_at":"2025-12-21T05:41:44.165Z","closed_at":"2025-12-21T05:41:44.165Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda632z","title":"Integration tests: skills_* tools (9 tools)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.854Z","updated_at":"2025-12-21T05:41:16.982Z","closed_at":"2025-12-21T05:41:16.982Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda7324","title":"Integration tests: structured_* + mandate_* tools (10 tools)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.855Z","updated_at":"2025-12-21T05:41:18.306Z","closed_at":"2025-12-21T05:41:18.306Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjf9zda9lvj","title":"Integration tests: repo_* tools (5 tools)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T05:17:13.857Z","updated_at":"2025-12-21T05:41:19.312Z","closed_at":"2025-12-21T05:41:19.312Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjf9zd9kgo7","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","title":"Drizzle Migration Phase 2: Fix Tests + Hive Conversion","description":"Complete Drizzle migration for swarm-mail package.\n\n## Context\n- Streams subsystem: ✅ Done (wrappers added)\n- Memory subsystem: ✅ Done (already uses Drizzle)\n- Hive subsystem: ❌ Still uses DatabaseAdapter with raw SQL\n\n## Approach\nKeep HiveAdapter interface, rewrite internals to use Drizzle ORM.\nFollow course-builder adapter-drizzle pattern: interface in core, Drizzle implementation under the hood.\n\n## Shared Context for Workers\n- Use `toSwarmDb()` to convert DatabaseAdapter → SwarmDb (Drizzle client)\n- Create wrapper functions matching old signatures for backward compat\n- Keep complex CTEs as raw SQL via `sql.raw()` if Drizzle can't express them\n- Schema source of truth: `packages/swarm-mail/src/db/schema/hive.ts`\n\n## Dependencies\n- Task 1 (fix tests) unblocks CI\n- Task 2 (hive conversion) is the main work\n- Task 3 (schema consolidation) depends on Task 2","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-21T15:23:32.067Z","updated_at":"2025-12-21T15:23:32.067Z","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w82v6","title":"Fix 6 failing integration tests (CI blocker)","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-21T15:23:32.072Z","updated_at":"2025-12-21T15:23:32.072Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wanib","title":"Convert hive/store.ts to Drizzle","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T15:23:32.074Z","updated_at":"2025-12-21T15:23:32.074Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wcdxt","title":"Convert hive/projections.ts to Drizzle","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T15:23:32.076Z","updated_at":"2025-12-21T15:23:32.076Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2webre","title":"Convert hive/queries.ts to Drizzle (or keep raw SQL for complex CTEs)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-21T15:23:32.078Z","updated_at":"2025-12-21T15:23:32.078Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wggoh","title":"Convert hive/comments.ts, labels.ts, dependencies.ts to Drizzle","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T15:23:32.080Z","updated_at":"2025-12-21T15:23:32.080Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
{"id":"opencode-swarm-monorepo-lf2p4u-mjfvn2wiku9","title":"Consolidate duplicate schema definitions","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T15:23:32.082Z","updated_at":"2025-12-21T15:23:32.082Z","parent_id":"opencode-swarm-monorepo-lf2p4u-mjfvn2w3yuv","dependencies":[],"labels":[],"comments":[]}
